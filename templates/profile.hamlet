<h2>Documents
<p>
    <a href=@{UserFileR (userHandle u) mempty}>Manage my files
<h2>Profile
<form method=post enctype=#{enctype}>
    <table>
        ^{widget}
        <tr>
            <td colspan=3>
                <input type=submit value="Update Profile">
<h2>Gravatar
<p style=max-width:600px>
    This site uses #
    <a href=http://gravatar.com>Gravatar
    \ for displaying user avatars. In order to change your avatar, please log in to Gravatar with the email address #
    <b>#{userEmail u}
    . Your current avatar is:
<p>
    <img alt=Avatar src=#{gravatarImg (userEmail u) opts}
$maybe groups <- mgroups
    <h2>Label groups
    <table>
        $forall Entity groupid group <- groups
            <tr>
                <td>#{groupName group}
                <td>
                    <form method=post action=@{DeleteGroupR groupid}>
                        <input type=submit value=Delete group>
                <td>
                    <form method=post action=@{UpGroupR groupid}>
                        <input type=submit value=Up>
                <td>
                    <form method=post action=@{DownGroupR groupid}>
                        <input type=submit value=Down>
    <p>
        <form method=post action=@{GroupsR}>
            Create a new group named: #
            <input type=text name=name>
            \ #
            <input type=submit value=Create>
$maybe alllabels <- mlabels
    <h2>Labels
    $forall grouppair <- alllabels
        $with group <- entityVal $ fst grouppair, labels <- snd grouppair
            <table>
                <caption>#{groupName group}
                $forall Entity labelid label <- labels
                    <tr>
                        <td>#{labelName label}
                        <td>
                            <form method=post action=@{DeleteLabelR labelid}>
                                <input type=submit value=Delete>
    <p>
        <form method=post action=@{LabelsR}>
            ^{labelForm}
